WindowManager:
    id: window_manager
    StartScreen
    LogInScreen
    SignUpScreen
    HomeScreen
    NavigationScreen
    InputScreen
    HistoryScreen
    CameraScreen
    PostCameraScreen
<StartScreen>
    name: "start"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "SilverWallets"
            color: 1,0,1,1
            size_hint: 1, .2
        BoxLayout:
            orientation: "vertical"
            spacing: 50
            padding: 100
            Button:
                text: "Sign Up"
                id: signUp
                on_release: 
                    app.root.current = "signup"
                    root.manager.transition.direction = "left"
            Button: 
                text: "Log In"
                id: logIn
                on_release: 
                    app.root.current = "login"
                    root.manager.transition.direction = "left"
<LogInScreen>
    name: "login"
    FloatLayout:
        BoxLayout:
            orientation: "vertical"
            Label:
                text: "Log In"
                color: 0,0,1,1
            TextInput:
                hint_text: "Enter email"
                multiline: False
                on_text_validate: root.on_text_validate_email(self)
            TextInput:
                hint_text: "Enter password"
                multiline: False
                on_text_validate: root.on_text_validate_pw(self)
            Label:
                text: root.status_info
                color: 0.5,0,0,1
                size_hint: 1, 0.23
            Button:
                text: "CONFIRM"
                color: 0,0,0,1     
                background_normal: ''
                background_color: 0.3, 0.9, 0.1, .85
                on_press: 
                    root.signup_to_firebase()
        AnchorLayout:
            anchor_x: 'left'
            anchor_y: 'top'
            Button:
                text: "Go Back"
                size_hint: .15, .05
                
                on_release: 
                    app.root.current = "start"
                    root.manager.transition.direction = "right"
<SignUpScreen>
    name: "signup"
    FloatLayout:
        BoxLayout:
            orientation: "vertical"
            Label:
                text: "Sign Up"
                color: 1,0,1,1
            TextInput:
                id: signUpText
                hint_text: "Enter email"
                multiline: False
                on_text_validate: root.on_text_validate_email(self)
            TextInput:
                hint_text: "Enter password"
                multiline: False
                on_text_validate: root.on_text_validate_pw(self)
            Label:
                text: "Monthly Expenditure Limit:"
                color: 0,0,0,1
                size_hint: 1,0.23
            TextInput:
                hint_text: "Enter amount in SGD"
                multiline: False
                input_filter: "float"
                on_text_validate: root.on_text_validate_target(self) 
            Label:
                text: root.status_info
                color: 0.5,0,0,1
                size_hint: 1, 0.23
            Button:

                text: "CONFIRM"
                color: 0,0,0,1     
                background_normal: ''
                background_color: 0.3, 0.9, 0.1, .85
                on_press: 
                    root.signup_to_firebase()
        AnchorLayout:
            anchor_x: 'left'
            anchor_y: 'top'
            Button:
                text: "Go Back"
                size_hint: .15, .05
                on_release: 
                    app.root.current = "start"
                    root.manager.transition.direction = "right"
<HomeScreen>
    name: "home"
    BoxLayout:
        AnchorLayout:
            
            anchor_x: 'left'
            anchor_y: 'top'
            Label:
                size_hint: 1,None
                text: root.welcome_text
                font_size: "50"
                color: 0, 0, 0.3, 1
        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'
            Button:
                text: "Settings"
                size_hint: .35, .05
                on_press: root.switch_tab
<NavigationScreen>
    
    name: "navigate"
    MDBottomNavigation:
        id: bottom_nav
        MDBottomNavigationItem:
            name: 'input'
            text: "Input"
            InputScreen

        MDBottomNavigationItem:
            
            name: 'home'
            text: "Home"
            HomeScreen
        MDBottomNavigationItem:
            name: 'history'
            text: "History"
            HistoryScreen
<CameraScreen>
    name: "camera"
    on_enter: camera.play = not camera.play
    BoxLayout:
        orientation: "vertical"
        AnchorLayout:
            anchor_x: "left"
            anchor_y: "top"
            Button:
                text: "back"
                size_hint: 0.3, 0.05
                on_press: 
                    camera.play = not camera.play
                    app.root.current = "navigate"
                    root.manager.transition.direction = "right"
        Camera:
            id: camera
            resolution: (1280, 720)
            play: False
            
        AnchorLayout:
            anchor_x: "center"
            anchor_y: "bottom"
            Button:
                text: "capture"
                on_press: root.capture()
                size_hint: 0.5, 0.1
                

<InputScreen>
    name: "input"
    BoxLayout:
        orientation: "vertical"
        Label: 
            text: "Input Data"
            color: 0.1, 0.1, 0.7,1
        BoxLayout:
            
            orientation: "horizontal"
            Button:
                text: "Enter Manually"
                
            Button: 
                text: "Scan Receipt"
                on_press: 
                    app.root.current = "camera"
                    app.root.transition.direction = "left"
<HistoryScreen>
    BoxLayout:
        Label:
            text: "History"
            color: 0,0.3,0,1
<PostCameraScreen>

<MainWidget>:
